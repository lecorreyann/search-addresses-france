{
  "version": 3,
  "sources": ["../../../esm/src/application/getAddressesFrance.js"],
  "sourcesContent": ["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst getAddressDetailsFromOkapiApi_1 = __importDefault(require(\"../infrastructure/getAddressDetailsFromOkapiApi\"));\nconst getAddressesFromOkapiApi_1 = __importDefault(require(\"../infrastructure/getAddressesFromOkapiApi\"));\nfunction getAddressesFrance(query) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, e_1, _b, _c;\n        if (!process.env.OKAPI_API_KEY) {\n            throw new Error(\"OKAPI API Key is not defined\");\n        }\n        let addresses = [];\n        const response = yield (0, getAddressesFromOkapiApi_1.default)(query, process.env.OKAPI_API_KEY);\n        if (response.status === 200) {\n            const data = yield response.json();\n            try {\n                for (var _d = true, data_1 = __asyncValues(data), data_1_1; data_1_1 = yield data_1.next(), _a = data_1_1.done, !_a; _d = true) {\n                    _c = data_1_1.value;\n                    _d = false;\n                    let address = _c;\n                    const addressDetails = yield (0, getAddressDetailsFromOkapiApi_1.default)(address.code, process.env.OKAPI_API_KEY);\n                    const data = yield addressDetails.json();\n                    addresses.push({\n                        postal_code: data.codePostal,\n                        city: data.commune,\n                        road: `${data.libelleVoie}${data.lieuDit ? ` ${data.lieuDit}` : \"\"}`,\n                        number: data.numeroVoie,\n                        country: \"France\",\n                        latitude: 0,\n                        longitude: 0,\n                    });\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_d && !_a && (_b = data_1.return)) yield _b.call(data_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        return addresses;\n    });\n}\nexports.default = getAddressesFrance;\n"],
  "mappings": "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",
  "names": ["v", "data"]
}
