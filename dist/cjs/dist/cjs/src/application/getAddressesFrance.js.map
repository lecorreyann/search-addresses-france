{
  "version": 3,
  "sources": ["../../../../../esm/dist/cjs/src/application/getAddressesFrance.js"],
  "sourcesContent": ["\"use strict\";\nvar __awaiter = function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function (resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            }\n            catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            }\n            catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = function (o) {\n    if (!Symbol.asyncIterator)\n        throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n        return this;\n    }, i);\n    function verb(n) {\n        i[n] = o[n] && function (v) {\n            return new Promise(function (resolve, reject) {\n                v = o[n](v), settle(resolve, reject, v.done, v.value);\n            });\n        };\n    }\n    function settle(resolve, reject, d, v) {\n        Promise.resolve(v).then(function (v2) {\n            resolve({ value: v2, done: d });\n        }, reject);\n    }\n};\nvar __importDefault = function (mod) {\n    return mod && mod.__esModule ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst getAddressDetailsFromOkapiApi_1 = __importDefault(require(\"../infrastructure/getAddressDetailsFromOkapiApi\"));\nconst getAddressesFromOkapiApi_1 = __importDefault(require(\"../infrastructure/getAddressesFromOkapiApi\"));\nfunction getAddressesFrance(query) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, e_1, _b, _c;\n        if (!process.env.OKAPI_API_KEY) {\n            throw new Error(\"OKAPI API Key is not defined\");\n        }\n        let addresses = [];\n        const response = yield (0, getAddressesFromOkapiApi_1.default)(query, process.env.OKAPI_API_KEY);\n        if (response.status === 200) {\n            const data = yield response.json();\n            try {\n                for (var _d = true, data_1 = __asyncValues(data), data_1_1; data_1_1 = yield data_1.next(), _a = data_1_1.done, !_a; _d = true) {\n                    _c = data_1_1.value;\n                    _d = false;\n                    let address = _c;\n                    const addressDetails = yield (0, getAddressDetailsFromOkapiApi_1.default)(address.code, process.env.OKAPI_API_KEY);\n                    const data2 = yield addressDetails.json();\n                    addresses.push({\n                        postal_code: data2.codePostal,\n                        city: data2.commune,\n                        road: `${data2.libelleVoie}${data2.lieuDit ? ` ${data2.lieuDit}` : \"\"}`,\n                        number: data2.numeroVoie,\n                        country: \"France\",\n                        latitude: 0,\n                        longitude: 0\n                    });\n                }\n            }\n            catch (e_1_1) {\n                e_1 = { error: e_1_1 };\n            }\n            finally {\n                try {\n                    if (!_d && !_a && (_b = data_1.return))\n                        yield _b.call(data_1);\n                }\n                finally {\n                    if (e_1)\n                        throw e_1.error;\n                }\n            }\n        }\n        return addresses;\n    });\n}\nexports.default = getAddressesFrance;\n"],
  "mappings": "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",
  "names": []
}
